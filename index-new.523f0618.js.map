{"mappings":"qhBACA,IAAAA,EAAAC,EAAA,S,8BCMA,MAAMC,EAAOC,SAASC,cAAc,gBAC9BC,EAAcF,SAASC,cAAc,iBAGrCE,EAAc,IAAI,EAAAC,EAAAC,SAAY,CAClCC,SAAU,cACVC,UAAU,IAENC,EAAiB,IDRR,MAOZC,gBACK,MAAMC,EAAM,uCAAcC,KAAKC,kEAAqCD,KAAKE,QACnEC,KAACA,SAAcjB,EAAAQ,QAAMU,IAAIL,GAE/B,OADAC,KAAKK,gBACEF,C,CAGXG,YACIN,KAAKE,KAAO,C,CAGhBG,gBACIL,KAAKE,MAAQ,C,CAlBjBK,cACIP,KAAKC,MAAQ,GACbD,KAAKE,KAAO,C,GC6BpBJ,eAAeU,IACf,IACE,MAAMC,QAURX,iBACE,IACE,MAAMY,SAACA,SAAkBb,EAAec,UAExC,GAAuB,IAApBD,EAASE,OAAc,MAAM,IAAIC,MAAMC,KAI1C,OAFeJ,EAASK,QAAO,CAACC,EAAKC,IAAYD,EAWrD,UAAsBE,MAACA,EAAKC,OAAEA,EAAMpB,IAAEA,EAAGqB,WAAEA,EAAUC,YAAEA,IACrD,MAAO,yEAEuBH,0CACCC,GAAU,gCAErCC,GACA,mMAE+BC,sBACvBtB,oE,CArB6CuB,CAAaL,IAAU,G,CAI9E,MAAOM,GACPC,EAAAC,GAASC,OAAOC,QAAQ,2B,EArBLC,GACrBrC,EAAYsC,mBAAmB,YAAapB,GAC5CjB,EAAYsC,Q,CACZ,MAAOP,GACPT,G,EAsCF,SAASA,IACPtB,EAAYuC,OACZP,EAAAC,GAASC,OAAOC,QAAQ,6C,CAnE1BvC,EAAK4C,iBAAiB,UAItBlC,eAAwBmC,GACtBA,EAAEC,iBACF1C,EAAY2C,OACZtC,EAAeI,MAAQgC,EAAEG,cAAcC,SAASC,YAAYC,MAC5D1C,EAAeS,YASff,EAAYiD,UAAY,GAPxBhC,IACApB,EAAKqD,O,IAVPjD,EAAYkD,OAAOV,iBAAiB,QAASxB,GAyE7CmC,OAAOX,iBAAiB,UAExB,WACE,MAAMY,UAACA,EAASC,aAAEA,EAAYC,aAAEA,GAAgBzD,SAAS0D,gBAEtDH,EAAYE,GAAgBD,EAAe,GAC5CrC,G","sources":["src/api-news.js","src/index-news.js"],"sourcesContent":["\nimport axios from \"axios\";\n\nconst API_KEY = 'apiKey=bcf8ba2c5fd94471ba7bc35b189c696c';\nconst BASE_URL = 'https://newsapi.org/v2/everything?q=';\n\n\nexport default class NewsApiService {\n    constructor() {\n        this.query = \"\";\n        this.page = 1;\n    }\n\n\n   async getNews() {\n        const url = `${BASE_URL}${this.query}&${API_KEY}&pageSize=10&page=${this.page}`;\n        const {data} = await axios.get(url);\n        this.incrementPage();\n        return data;\n    }\n\n    resetPage() {\n        this.page = 1;\n    }\n\n    incrementPage() {\n        this.page += 1;\n    }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// async function fetchNews(query) {\n//     try {\n//            const {data} = await axios.get(`${BASE_URL}${query}&${API_KEY}`);\n//    return data;\n        \n//     } catch (error) {\n//         console.log(error);\n//     }\n\n    \n// }\n\n// export { fetchNews }\n\n","import { fetchNews } from './api-news';\nimport Notiflix from 'notiflix';\nimport LoadMoreBtn from './loadMoreBtn';\nimport NewsApiService from './api-news';\n\n\n\nconst form = document.querySelector('.search-form');\nconst newsWrapper = document.querySelector('.news-wrapper');\n\n\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: \".load-more1\",\n  isHidden: true,\n})\nconst newsApiService = new NewsApiService();\n\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.button.addEventListener('click', fetchArticles);\n\n\nasync function onSearch(e) {\n  e.preventDefault();\n  loadMoreBtn.show();\n  newsApiService.query = e.currentTarget.elements.searchQuery.value;\n  newsApiService.resetPage();\n  clearNewsList();\n  fetchArticles();\n  form.reset();\n\n\n}\n\nfunction clearNewsList() {\n  newsWrapper.innerHTML = \"\";\n}\n\n\nasync function fetchArticles() {\ntry {\n  const markup = await getArticlesMarkup();\n  newsWrapper.insertAdjacentHTML('beforeend', markup);\n  loadMoreBtn.enable();\n} catch (error) {\n  onError();\n}\n\n}\n\n\nasync function getArticlesMarkup() {\n  try {\n    const {articles} = await newsApiService.getNews();\n\n    if(articles.length === 0) throw new Error(onError());\n  \n    const markup = articles.reduce((acc, article) => acc + createMarkup(article), \"\");\n  \n    return markup;\n    \n  } catch (error) {\n    Notiflix.Notify.failure('Помилка запиту з сервера')\n  }\n\n}\n\n\nfunction createMarkup({title, author, url, urlToImage, description}) {\n  return `\n          <div class=\"article-card\">\n    <h2 class=\"article-title\">${title}</h2>\n    <h3 class=\"article-author\">${author || 'Unknown'}</h3>\n    <img src=${\n      urlToImage ||\n      'https://sun9-43.userapi.com/impf/c637716/v637716451/5754/CZa3BJtbJtg.jpg?size=520x0&quality=95&sign=02df8d0cd8ae78099bc1f50938efd60a'\n    } class=\"article-img\">\n    <p class=\"article-description\">${description}</p>\n    <a href=${url} target=\"_blank\" class=\"article-link\">Read more</a>\n  </div>\n  ` ;\n}\n\nfunction onError() {\n  loadMoreBtn.hide();\n  Notiflix.Notify.failure('Нажаль по Ващому запиту нічого не знайдено');\n}\n\n\n\n// infinity scroll\n\nwindow.addEventListener('scroll', handlescroll);\n\nfunction handlescroll() {\n  const {scrollTop, scrollHeight, clientHeight} = document.documentElement;\n\n  if(scrollTop + clientHeight >= scrollHeight - 5) {\n    fetchArticles();\n  }\n}\n\n// function createMarkup(articles) {\n//   const markup = articles.map((article) => {\n//     return `\n//         <div class=\"article-card\">\n//     <h2 class=\"article-title\">${article.title}</h2>\n//     <h3 class=\"article-author\">${article.author || 'Unknown'}</h3>\n//     <img src=${\n//       article.urlToImage ||\n//       'https://sun9-43.userapi.com/impf/c637716/v637716451/5754/CZa3BJtbJtg.jpg?size=520x0&quality=95&sign=02df8d0cd8ae78099bc1f50938efd60a'\n//     } class=\"article-img\">\n//     <p class=\"article-description\">${article.description}</p>\n//     <a href=${article.url} target=\"_blank\" class=\"article-link\">Read more</a>\n// </div>\n//     `\n//   }).join(\"\");\n\n//   return markup;\n\n// }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// // loadMoreButton.addEventListener('click', onLoadMoreButtonClick);\n\n// async function onSearch(e) {\n//   e.preventDefault();\n//   const query = e.currentTarget.elements.searchQuery.value.trim();\n//   const { articles } = await fetchNews(query);\n//   createMarkup(articles);\n//   newsWrapper.insertAdjacentHTML('beforeend', createMarkup(articles));\n\n// }\n\n// function createMarkup(articles) {\n//   const markup = articles.map(article => {\n//     return `\n//     <div class=\"article-card\">\n//     <h2 class=\"article-title\">${article.title}</h2>\n//     <h3 class=\"article-author\">${article.author || 'Unknown'}</h3>\n//     <img src=${\n//       article.urlToImage ||\n//       'https://sun9-43.userapi.com/impf/c637716/v637716451/5754/CZa3BJtbJtg.jpg?size=520x0&quality=95&sign=02df8d0cd8ae78099bc1f50938efd60a'\n//     } class=\"article-img\">\n//     <p class=\"article-description\">${article.description}</p>\n//     <a href=${article.url} target=\"_blank\" class=\"article-link\">Read more</a>\n// </div>\n//     `\n//   }).join(\"\");\n//   return markup;\n// }\n"],"names":["$2shzp","parcelRequire","$677a20dc4d175062$var$form","document","querySelector","$677a20dc4d175062$var$newsWrapper","$677a20dc4d175062$var$loadMoreBtn","$24RSS","default","selector","isHidden","$677a20dc4d175062$var$newsApiService","async","url","this","query","page","data","get","incrementPage","resetPage","constructor","$677a20dc4d175062$var$fetchArticles","markup","articles","getNews","length","Error","$677a20dc4d175062$var$onError","reduce","acc","article","title","author","urlToImage","description","$677a20dc4d175062$var$createMarkup","error","$parcel$interopDefault","$7Y9D8","Notify","failure","$677a20dc4d175062$var$getArticlesMarkup","insertAdjacentHTML","enable","hide","addEventListener","e","preventDefault","show","currentTarget","elements","searchQuery","value","innerHTML","reset","button","window","scrollTop","scrollHeight","clientHeight","documentElement"],"version":3,"file":"index-new.523f0618.js.map"}