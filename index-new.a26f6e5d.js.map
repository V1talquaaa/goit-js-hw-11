{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,gBCCAD,EAAAC,EAAA,S,qDAMeC,EA0Bf,W,sBA1BqBC,I,aAEbC,KAAKC,MAAQ,GACbD,KAAKE,KAAO,C,iBAIXC,IAAA,U,MAAN,W,kBAAAC,EAAAR,EAAA,CAAAQ,EAAAC,GAAAC,MAAA,SAAAC,I,IACWC,EACCC,E,yEADDD,EAAM,GAAcE,OAXjB,wCAW+BA,OAAdC,EAAKV,MAAM,KAA+BS,OAZ5D,0CAYwC,sBAA8BA,OAAVC,EAAKT,M,SACpDU,EAAAC,QAAMC,IAAIN,G,cAAzBC,EAAKM,EAAAC,KAAJP,KACPE,EAAKM,gB,kBACER,G,0CAJZ,E,IAOCN,IAAA,Y,MAAA,WACIH,KAAKE,KAAO,C,IAGhBC,IAAA,gB,MAAA,WACIH,KAAKE,MAAQ,C,OAOrB,G,0BD1BMgB,EAAOC,SAASC,cAAc,gBAC9BC,EAAcF,SAASC,cAAc,iBAGrCE,EAAc,IAAI,EAAAC,EAAAV,SAAY,CAClCW,SAAU,cACVC,UAAU,IAENC,EAAiB,IAAI5B,E,SAOZ6B,I,OAAAA,EAAfvB,EAAAR,EAAA,CAAAQ,EAAAC,GAAAC,MAAA,SAAAC,EAAwBqB,G,kEACtBA,EAAEC,iBACFP,EAAYQ,OACZJ,EAAezB,MAAQ2B,EAAEG,cAAcC,SAASC,YAAYC,MAC5DR,EAAeS,YACfC,IACAC,IACAnB,EAAKoB,Q,4CAPgBC,MAAAvC,KAAAwC,U,CAYvB,SAASJ,IACPf,EAAYoB,UAAY,E,UAIXJ,I,OAAAK,EAAaH,MAAAvC,KAAAwC,U,UAAbE,I,OAAAA,EAAftC,EAAAR,EAAA,CAAAQ,EAAAC,GAAAC,MAAA,SAAAC,I,IAEQoC,E,2FAAeC,I,OAAfD,EAAM5B,EAAAC,KACZK,EAAYwB,mBAAmB,YAAaF,GAC5CrB,EAAYwB,S,gDAEZC,I,0DAN0BR,MAAAvC,KAAAwC,U,UAYbI,I,OAAAI,EAAiBT,MAAAvC,KAAAwC,U,UAAjBQ,I,OAAAA,EAAf5C,EAAAR,EAAA,CAAAQ,EAAAC,GAAAC,MAAA,SAAAC,I,IAEW0C,EAIDN,E,2FAJmBjB,EAAewB,U,UAEjB,KAFjBD,EAASlC,EAAAC,KAARiC,UAEKE,OAAY,C,eAAE,MAAM,IAAIC,MAAML,K,cAEpCJ,EAASM,EAASI,QAAO,SAACC,EAAKC,G,OAAYD,EAAME,EAAaD,E,GAAU,I,kBAEvEZ,G,kCAGPvC,EAAAqD,GAASC,OAAOC,QAAQ,4B,2DAXIpB,MAAAvC,KAAAwC,U,CAiBhC,SAASgB,EAAaI,G,IAACC,EAADD,EAACC,MAAOC,EAARF,EAAQE,OAAQtD,EAAhBoD,EAAgBpD,IAAKuD,EAArBH,EAAqBG,WAAYC,EAAjCJ,EAAiCI,YACrD,MAAO,yEAGwBtD,OADDmD,EAAM,0CAGhCnD,OAF2BoD,GAAU,UAAU,wBAKhBpD,OAH/BqD,GACA,uIACD,8DAESrD,OADuBsD,EAAY,sBAC/BtD,OAAJF,EAAI,oE,CAKlB,SAASuC,IACPzB,EAAY2C,OACZ7D,EAAAqD,GAASC,OAAOC,QAAQ,6C,CAnE1BzC,EAAKgD,iBAAiB,U,SAIEtC,G,OAATD,EAAQY,MAAAvC,KAAAwC,U,IAHvBlB,EAAY6C,OAAOD,iBAAiB,QAAS7B,GAyE7C+B,OAAOF,iBAAiB,UAExB,WACE,IAAgDG,EAAAlD,SAASmD,gBAAlDC,EAAyCF,EAAzCE,UAAWC,EAA8BH,EAA9BG,aAAcC,EAAgBJ,EAAhBI,aAE7BF,EAAYE,GAAgBD,EAAe,GAC5CnC,G","sources":["src/index-news.js","src/api-news.js"],"sourcesContent":["import { fetchNews } from './api-news';\nimport Notiflix from 'notiflix';\nimport LoadMoreBtn from './loadMoreBtn';\nimport NewsApiService from './api-news';\n\n\n\nconst form = document.querySelector('.search-form');\nconst newsWrapper = document.querySelector('.news-wrapper');\n\n\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: \".load-more1\",\n  isHidden: true,\n})\nconst newsApiService = new NewsApiService();\n\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.button.addEventListener('click', fetchArticles);\n\n\nasync function onSearch(e) {\n  e.preventDefault();\n  loadMoreBtn.show();\n  newsApiService.query = e.currentTarget.elements.searchQuery.value;\n  newsApiService.resetPage();\n  clearNewsList();\n  fetchArticles();\n  form.reset();\n\n\n}\n\nfunction clearNewsList() {\n  newsWrapper.innerHTML = \"\";\n}\n\n\nasync function fetchArticles() {\ntry {\n  const markup = await getArticlesMarkup();\n  newsWrapper.insertAdjacentHTML('beforeend', markup);\n  loadMoreBtn.enable();\n} catch (error) {\n  onError();\n}\n\n}\n\n\nasync function getArticlesMarkup() {\n  try {\n    const {articles} = await newsApiService.getNews();\n\n    if(articles.length === 0) throw new Error(onError());\n  \n    const markup = articles.reduce((acc, article) => acc + createMarkup(article), \"\");\n  \n    return markup;\n    \n  } catch (error) {\n    Notiflix.Notify.failure('Помилка запиту з сервера')\n  }\n\n}\n\n\nfunction createMarkup({title, author, url, urlToImage, description}) {\n  return `\n          <div class=\"article-card\">\n    <h2 class=\"article-title\">${title}</h2>\n    <h3 class=\"article-author\">${author || 'Unknown'}</h3>\n    <img src=${\n      urlToImage ||\n      'https://sun9-43.userapi.com/impf/c637716/v637716451/5754/CZa3BJtbJtg.jpg?size=520x0&quality=95&sign=02df8d0cd8ae78099bc1f50938efd60a'\n    } class=\"article-img\">\n    <p class=\"article-description\">${description}</p>\n    <a href=${url} target=\"_blank\" class=\"article-link\">Read more</a>\n  </div>\n  ` ;\n}\n\nfunction onError() {\n  loadMoreBtn.hide();\n  Notiflix.Notify.failure('Нажаль по Ващому запиту нічого не знайдено');\n}\n\n\n\n// infinity scroll\n\nwindow.addEventListener('scroll', handlescroll);\n\nfunction handlescroll() {\n  const {scrollTop, scrollHeight, clientHeight} = document.documentElement;\n\n  if(scrollTop + clientHeight >= scrollHeight - 5) {\n    fetchArticles();\n  }\n}\n\n// function createMarkup(articles) {\n//   const markup = articles.map((article) => {\n//     return `\n//         <div class=\"article-card\">\n//     <h2 class=\"article-title\">${article.title}</h2>\n//     <h3 class=\"article-author\">${article.author || 'Unknown'}</h3>\n//     <img src=${\n//       article.urlToImage ||\n//       'https://sun9-43.userapi.com/impf/c637716/v637716451/5754/CZa3BJtbJtg.jpg?size=520x0&quality=95&sign=02df8d0cd8ae78099bc1f50938efd60a'\n//     } class=\"article-img\">\n//     <p class=\"article-description\">${article.description}</p>\n//     <a href=${article.url} target=\"_blank\" class=\"article-link\">Read more</a>\n// </div>\n//     `\n//   }).join(\"\");\n\n//   return markup;\n\n// }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// // loadMoreButton.addEventListener('click', onLoadMoreButtonClick);\n\n// async function onSearch(e) {\n//   e.preventDefault();\n//   const query = e.currentTarget.elements.searchQuery.value.trim();\n//   const { articles } = await fetchNews(query);\n//   createMarkup(articles);\n//   newsWrapper.insertAdjacentHTML('beforeend', createMarkup(articles));\n\n// }\n\n// function createMarkup(articles) {\n//   const markup = articles.map(article => {\n//     return `\n//     <div class=\"article-card\">\n//     <h2 class=\"article-title\">${article.title}</h2>\n//     <h3 class=\"article-author\">${article.author || 'Unknown'}</h3>\n//     <img src=${\n//       article.urlToImage ||\n//       'https://sun9-43.userapi.com/impf/c637716/v637716451/5754/CZa3BJtbJtg.jpg?size=520x0&quality=95&sign=02df8d0cd8ae78099bc1f50938efd60a'\n//     } class=\"article-img\">\n//     <p class=\"article-description\">${article.description}</p>\n//     <a href=${article.url} target=\"_blank\" class=\"article-link\">Read more</a>\n// </div>\n//     `\n//   }).join(\"\");\n//   return markup;\n// }\n","\nimport axios from \"axios\";\n\nconst API_KEY = 'apiKey=bcf8ba2c5fd94471ba7bc35b189c696c';\nconst BASE_URL = 'https://newsapi.org/v2/everything?q=';\n\n\nexport default class NewsApiService {\n    constructor() {\n        this.query = \"\";\n        this.page = 1;\n    }\n\n\n   async getNews() {\n        const url = `${BASE_URL}${this.query}&${API_KEY}&pageSize=10&page=${this.page}`;\n        const {data} = await axios.get(url);\n        this.incrementPage();\n        return data;\n    }\n\n    resetPage() {\n        this.page = 1;\n    }\n\n    incrementPage() {\n        this.page += 1;\n    }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// async function fetchNews(query) {\n//     try {\n//            const {data} = await axios.get(`${BASE_URL}${query}&${API_KEY}`);\n//    return data;\n        \n//     } catch (error) {\n//         console.log(error);\n//     }\n\n    \n// }\n\n// export { fetchNews }\n\n"],"names":["$bpxeT","parcelRequire","$6a2485d037b687dd$export$2e2bcd8739ae039","NewsApiService","this","query","page","key","$parcel$interopDefault","$2TvXO","mark","_callee","url","data","concat","_this","$dIxxU","default","get","_ctx","sent","incrementPage","$c7125d6f2b90c475$var$form","document","querySelector","$c7125d6f2b90c475$var$newsWrapper","$c7125d6f2b90c475$var$loadMoreBtn","$eK5fP","selector","isHidden","$c7125d6f2b90c475$var$newsApiService","$c7125d6f2b90c475$var$_onSearch","e","preventDefault","show","currentTarget","elements","searchQuery","value","resetPage","$c7125d6f2b90c475$var$clearNewsList","$c7125d6f2b90c475$var$fetchArticles","reset","apply","arguments","innerHTML","$c7125d6f2b90c475$var$_fetchArticles","markup","$c7125d6f2b90c475$var$getArticlesMarkup","insertAdjacentHTML","enable","$c7125d6f2b90c475$var$onError","$c7125d6f2b90c475$var$_getArticlesMarkup","articles","getNews","length","Error","reduce","acc","article","$c7125d6f2b90c475$var$createMarkup","$6JpON","Notify","failure","param","title","author","urlToImage","description","hide","addEventListener","button","window","_documentElement","documentElement","scrollTop","scrollHeight","clientHeight"],"version":3,"file":"index-new.a26f6e5d.js.map"}